// Generated by CoffeeScript 1.10.0
define(['jtable', 'moment'], function(jtable, moment) {
  $(document).ready(function() {
    $('#tbljobposts').jtable({
      title: 'Job Posts',
      paging: true,
      pageSize: 10,
      sorting: true,
      defaultSorting: 'postDate DESC',
      actions: {
        listAction: '/api/job/posts'
      },
      fields: {
        id: {
          key: true,
          create: false,
          edit: false,
          list: false
        },
        title: {
          title: 'Job Title'
        },
        postDate: {
          title: 'Post Date',
          display: function(data) {
            return moment.unix(data.record.post_date).format("YYYY-MM-DD");
          }
        },
        view_detail: {
          title: '',
          dependsOn: 'id',
          display: function(data) {
            return '<a href="/emp/job/detail/' + data.record.id + '">View Detail</a>';
          }
        },
        view_applications: {
          title: '',
          display: function(data) {
            return '<a href="' + data.record.id + '">View Applicaitons</a>';
          }
        }
      }
    });
    $('#tbljobposts').jtable('load');
  });
});
